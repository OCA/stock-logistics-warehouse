<?xml version="1.0"?>
<odoo>

    <record model="res.groups" id="group_restrict_warehouse">
        <field name="name">Restrict Unique Warehouse</field>
        <field name="category_id" ref="base.module_category_usability"/>
    </record>

    <record model="res.groups" id="group_multi_warehouse">
        <field name="name">Multi Warehouses</field>
        <field name="category_id" ref="base.module_category_usability"/>
    </record>

    <record id="ir_rule_stock_warehouse_allowed" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_warehouse"/>
        <field name="domain_force">[('id', '=', user.warehouse_id.id)]</field>
        <field name="name">Warehouses from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="stock_warehouse_rule_erp_manager" model="ir.rule">
        <field name="name">Warehouse rule erp manager</field>
        <field name="model_id" ref="stock.model_stock_warehouse"/>
        <field eval="False" name="global"/>
        <field name="groups" eval="[(6, 0, [ref('base.group_erp_manager')])]"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field eval="1" name="perm_read"/>  
    </record>

    <record id="ir_rule_stock_picking_type_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_picking_type"/>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock Picking Type from allowed Warehouse</field>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_location_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_location"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock locations from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_move_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_move"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock moves from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_picking_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_picking"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock pickings from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_inventory_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_inventory"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock Inventories from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_quant_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_quant"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Stock Quants from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_quant_package_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_quant_package"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Packages from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

    <record id="ir_rule_stock_warehouse_orderpoint_allowed_warehouse" model="ir.rule">
        <field name="model_id" ref="stock.model_stock_warehouse_orderpoint"/>
        <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="name">Orderpoints from allowed Warehouse</field>
        <field name="groups" eval="[(4, ref('stock_multi_warehouse_security.group_restrict_warehouse'))]"/>
        <field eval="0" name="perm_unlink"/>
        <field eval="0" name="perm_write"/>
        <field eval="1" name="perm_read"/>
        <field eval="0" name="perm_create"/>
    </record>

</odoo>

